# Команды

## Branch

git branch — глянуть все доступные ветки репозиторрия

git branch name-branch — создать новую ветку

git switch name-branch — переключиться на др. ветку

git checkout <хеш коммита> - переключение на конкретный коммит

git checkout main — обратное переключение к последнему коммиту

git branch — показывает на каком коммите находишься

## Log / blame / show

git log --graph — позволяет взглянуть на односвязный список. Большинство комманд в гите работают с этим списком

git log --name-status — показывает файлы которые были изменены или удалены

git log —oneline — отображение коммитов в одну линию

git log — позволяет просмотреть все коммиты проекта. Указывается имя и почта пользователя, хэш коммита, дата и название коммита. Показывает вывод через пейджер.
  -p — флаг показывает сразу с измененями diff
  -n — n цифра, ограничение кол-ва записей
  --stat — сокращенная версия измененного
 --graph — показывает ветвление и историю изменений
git log -- path/to/file  - глянуть коммиты связанные с конкретным файлом
git show хэш — просмотреть изменения в рамках одного коммита. Достаточно ввести первые 7 символов хэша.
Git blame file — кто последним менял файл. Показывает строчки кода.
  -L 69,82 — свитч, помогает найти изменений в ограниченных строках

Git grep — ищет совпадение с указанной строчкой во всех файлах проекта.
  -i — флаг убирает регистрозависимость.
  -c — флаг, количество совпадений в файле
\# Поиск в конкретном коммите
git grep Hexlet 5120bea
\# Поиск по всей истории
\# rev-list возвращает список хешей коммитов
git grep Hexlet $(git rev-list --all) — поиск во всех коммитах


## откаты - rm / restore

git rm --cached \<file\> - удаляет файл из индексации git add.

git rm file — содержит удаление + git add

git restore file — откатывает изменения из индекса к последнему коммиту

-f — force, принуждение

-d — directory

git clean -d -n — посмотреть какие файлы будут удалены. Рекомендуется выполнять перед самим удалением

git clean -fd — удаление неотслеживаемых файлов и каталогов

git clean -n -d -x — x опция позволяет удалить элементы отмеченные в .gitignore

git restore file — удаление изменений

git restore —staged file — если проиндексировал add, но нужно отменить индексирование

git revert хэш — отменяет любой коммит. Создает новый коммит без определнного коммита.

git reset — удаляет коммит. Можно выполнять, если не отправлен на github, т. е. У себя на локалке.

git reset --hard HEAD~ - отменяет последний коммит и удаляет все изменении в этом коммите.

  HEAD~n — откат на указанное n количество коммитов назад
   --hard — флаг, удаляет все изменения в коммите. Без указания этого флага, по умолчанию ставится —mixed, который отменяет коммит, но изменения в коммите переносит в рабочую директорию.


git commit --amend --no-edit — изменение последнего коммита. Приводит к откату коммита(через reset) и созданию нового. Например когда забыл добавить файлы. Сначала выполняется индексированеи add нужных файлов, затем прописывается команда.
  --no-edit — сохраняет коммит с прошлым описанием, без нее прописывается новое описание.

## Diff
Git diff — анализ изменений, показывает изменения, которые еще не проиндексированы. Непоказывает неотслеживаемые файлы (untracked)

\+ - добавленная строка

\- - удаленная строка

git diff —staged — изменения, которые добавлены в индексирование

git diff --cached — просмотреть для индексированных
  --cached и --staged — делают одно и тоже?

## Pull

git pull —rebase — правильное вытягивание по мнению хекслета из удаленного репозитория

## Commit / Add

git commit
-m — флаг, обозначает описание коммита

git add — индексирование, файлы коорые попадут в коммит.

git commit file -m 'desc' — выполняет add и commit, при условии, что они отслеживаются

git commit -am 'desc' — выполняет add и commit всех изменений, при условии, что отслеживаются
  -a — добавляет все изменения в индекс

git add -i — показывает измененные куски кода и справшивает, что с ними делать. Можно точно выбрать, что попадет в коммит.
  -i — перейдет в интерактивный коснсольный режим
  
  git add -p — проиндексировать некоторые строки файла
  -p — это --path

## Stash

stash — можно прятать изменения в одной ветке и применять в другой. Возможно в опред. случаях может быть конфликт.

git stash — прячет отслеживаемые или индексированные элементы

git stash push — делает тоже самое, что команда выше

git stash -u - можно прятать неотслеживаемые элементы

git stash branch testchanges - можно создать новую ветку на основе припрятанных элементов. Создастся ветка с последним коммитом HEAD

git stash --patch — выбрать самому в интерактивном режиме то, что будет спрятано

git stash --keep-index — прячет элементы, но оставляет в индексировании

git stash list - можно посмотреть список спрятанного

git stash apply — достает спрятанное, но не удаляет из списка спрятанных
  --index — полное восстановление исходного состояния
  
git stash apply stash@{2} — достает конкретное из списка

git stash drop stash@{0} — удалить спрятанное из списка

git stash pop — достать последнее спрятанное и удалить из списка

git status -s — показывает в сокращенном варианте статус элементов

## Bisect

git bisect — позволит бинарно найти коммит, который ломает определнный функционал в приложении. Ps возможно нужен автоматический скрипт для тестирования.

## Rebase

rebase — сложная команда. С множеством опции.

## .gitignore

/folder/ - не добавлять папку относительно рабочей директории. Т.е. подкаталоги могут добавляться.

folder/ - игнорируется в любой директории

folder/*.txt - игнорируется файлы .txt, но не игнорируются если будут folder/folder/*.txt

folder/**/*.txt — игнорируются все файлы .txt внутри folder

!/folder/ - ! задает исключение, которое не попадет в игнорирование


если необходимо игнорировать файл/каталог добавленный в коммит, то сначала добавляем игнорирование в .gitigore, затем удаляем файл/каталог и коммитим. При повторном добавленнии данного файла/каталога увидим, что теперь игнорируется. Либо:
git rm --cached file — удаляет(а не убирает) файл из репозитория, но остается на локальной файловой системе.

git check-ignore -v file or folder — показывает какая строчка в .gitignore влият на игнорирование конкретного файла или каталога. Можно пеердать несколько имен файлов.
